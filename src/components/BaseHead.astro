---
import '../styles/global.css';
import { ClientRouter } from "astro:transitions";

export interface Props {
  title: string;
  description: string;
  image?: string;
}

const { title, description, image = '/CyberPunkLogo2.jpg' } = Astro.props;
const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const siteImage = new URL(image, Astro.site).toString();
const author = "Bailey Burnsed";

const keywords = [
  "Bailey Burnsed","Burnsedia","Software consulting","Custom software development","Full stack developer",
  "AI consulting","Artificial Intelligence strategy","LLM integration","LangChain expert","GPT-4 developer",
  "Django developer","Vue.js expert","Flutter mobile developer","DevOps consultant","Serverless architecture",
  "CI/CD pipelines","Kubernetes & Docker","IT audit services","technology risk assessment","Cloud cost optimization",
  "AWS certified developer","GCP deployments","Azure expert",
  "Atlanta software development","Metro Atlanta software consultant","Freelance developer Atlanta",
  "East Point software consultant","College Park AI developer","Hapeville software developer",
  "Atlanta custom websites","Metro Atlanta custom websites","East Point custom websites",
  "College Park website developer","Hapeville website design","Atlanta small business technology",
  "Custom website design and development","Small business IT services","Small business tech consulting",
  "Affordable websites for small business Atlanta","CRM setup for small business","Ecommerce websites Atlanta",
  "Booking and scheduling software","Payment processor integration","Local SEO consulting Atlanta",
  "Python tutoring Atlanta","Programming lessons East Point","DevOps tutoring","Linux tutoring",
  "Neovim productivity training","Cloud computing classes","AI and ChatGPT tutoring",
  "Game development tutoring Godot","Flutter app dev tutoring",
  "Indie game development Atlanta","Godot game engine developer","Game design consulting",
  "Cross platform game builds","Steam and itch.io publishing support","Open source game dev tools",
  "BulkPost social media automation","Virtue Tracker productivity and issue tracker",
  "Client portal SaaS","Appointment booking SaaS","Lead generation SaaS for developers",
  "AI agents for marketing and analytics","Bookkeeping SaaS for freelancers","DIY SaaS templates",
  "White label SaaS deployment","API integrations for small business",
  "Astro Vue Django developer","PostgreSQL optimization","Docker and Kubernetes consulting",
  "Fly.io developer","Netlify developer","Linux server setup and optimization"
].join(", ");
---

<ClientRouter />

<!-- Global Metadata -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<meta name="generator" content={Astro.generator} />
<meta name="language" content="en" />
<meta name="robots" content="index, follow" />
<meta name="author" content={author} />
<meta name="keywords" content={keywords} />

<!-- Geo tags for local SEO -->
<meta name="geo.region" content="US-GA" />
<meta name="geo.placename" content="Atlanta Metro Area, Georgia" />
<meta name="geo.position" content="33.7490;-84.3880" />
<meta name="ICBM" content="33.7490, -84.3880" />

<!-- Canonical URL -->
<link rel="canonical" href={canonicalURL} />

<!-- Primary Meta Tags -->
<title>{title}</title>
<meta name="title" content={title} />
<meta name="description" content={description} />

<!-- Open Graph -->
<meta property="og:type" content="website" />
<meta property="og:url" content={canonicalURL} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={siteImage} />

<!-- Twitter / X -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@baileyburnsed" />
<meta name="twitter:creator" content="@baileyburnsed" />
<meta name="twitter:url" content={canonicalURL} />
<meta name="twitter:title" content={title} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={siteImage} />

<!-- Schema: Person -->
<script type="application/ld+json">
{JSON.stringify({
  "@context": "https://schema.org",
  "@type": "Person",
  name: "Bailey Burnsed",
  url: "https://baileyburnsed.dev",
  image: siteImage,
  sameAs: [
    "https://github.com/Burnsedia",
    "https://www.linkedin.com/in/bailey-burnsed-50051115a/",
    "https://x.com/baileyburnsed"
  ],
  jobTitle: "Founder & Lead Developer",
  worksFor: { "@type": "Organization", name: "Burnsedia", url: "https://baileyburnsed.dev" }
})}
</script>
<!-- Schema: Organization (Burnsedia) -->
<script type="application/ld+json">
{JSON.stringify({
  "@context": "https://schema.org",
  "@type": "Organization",
  name: "Burnsedia",
  url: "https://baileyburnsed.dev",
  logo: "https://baileyburnsed.dev/favicon.svg",
  description: "Burnsedia builds custom websites, AI solutions, and full-stack software for small businesses across Metro Atlanta.",
  sameAs: [
    "https://github.com/Burnsedia",
    "https://linkedin.com/in/bailey-burnsed-50051115a/",
    "https://x.com/baileyburnsed"
  ],
  founder: { "@type": "Person", name: "Bailey Burnsed" }
})}
</script>
<!-- Schema: Service -->
<script type="application/ld+json">
{JSON.stringify({
  "@context": "https://schema.org",
  "@type": "Service",
  name: "AI, Cloud, Web, and Full-Stack Software Consulting",
  provider: { "@type": "Organization", name: "Burnsedia", url: "https://baileyburnsed.dev" },
  serviceType: [
    "Custom website design and development",
    "Small business IT services",
    "Small business technology consulting",
    "AI consulting","LLM and GPT integration",
    "Full stack software development",
    "Cloud architecture and migration",
    "DevOps and CI/CD pipelines",
    "AWS / GCP / Azure deployments",
    "IT audit and tech risk assessment",
    "Serverless and edge deployments",
    "Custom SaaS platforms",
    "Social media automation (BulkPost)",
    "Productivity & issue tracking (Virtue Tracker)",
    "Client portal SaaS",
    "Appointment booking SaaS",
    "Lead generation SaaS",
    "AI agents for marketing and analytics",
    "Bookkeeping SaaS for freelancers",
    "Python tutoring","DevOps tutoring","Linux tutoring","Neovim productivity training",
    "AI/ChatGPT tutoring","Godot game dev tutoring",
    "Indie game development consulting"
  ],
  areaServed: [
    { "@type": "Place", name: "Atlanta, GA" },
    { "@type": "Place", name: "East Point, GA" },
    { "@type": "Place", name: "College Park, GA" },
    { "@type": "Place", name: "Hapeville, GA" },
    { "@type": "Place", name: "Metro Atlanta Area, GA" }
  ]
})}
</script>
<!-- LocalBusiness schema -->
<script type="application/ld+json">
{JSON.stringify({
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  name: "Burnsedia",
  image: siteImage,
  url: "https://baileyburnsed.dev",
  address: { "@type": "PostalAddress", addressLocality: "Atlanta", addressRegion: "GA", addressCountry: "US" },
  areaServed: ["Atlanta","East Point","College Park","Hapeville","Metro Atlanta"],
  description: "Custom websites, AI solutions, and small business tech consulting across Metro Atlanta.",
  sameAs: [
    "https://github.com/Burnsedia",
    "https://linkedin.com/in/bailey-burnsed-50051115a/",
    "https://x.com/baileyburnsed"
  ]
})}
</script>
<!-- Google tag (gtag.js) -->
<!-- GA4 hardcoded -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LRMSZ4V1XG"></script>
<script>
  // --- GA bootstrap ---
  window.dataLayer = window.dataLayer || [];
  function gtag(){ dataLayer.push(arguments); }
  gtag('js', new Date());

  // IMPORTANT: disable auto page_view to avoid double-counts
  gtag('config', 'G-LRMSZ4V1XG', { send_page_view: false });

  // Unified page_view sender
  function sendPageView() {
    if (typeof gtag !== 'function') return;
    gtag('event', 'page_view', {
      page_title: document.title,
      page_location: location.href,
      page_path: location.pathname + location.search + location.hash
    });
    // Uncomment to see it in your console while debugging:
    // console.debug('[GA4] page_view', location.href);
  }

  // Initial load
  sendPageView();

  // Astro SPA hooks (when available)
  addEventListener('astro:page-load', sendPageView);
  addEventListener('astro:after-swap', sendPageView);

  // History API patch (catches most client routers)
  ['pushState','replaceState'].forEach(fn => {
    const orig = history[fn];
    history[fn] = function() {
      const ret = orig.apply(this, arguments);
      queueMicrotask(sendPageView); // defer after URL changes
      return ret;
    };
  });
  // Back/forward
  addEventListener('popstate', sendPageView);
</script>

